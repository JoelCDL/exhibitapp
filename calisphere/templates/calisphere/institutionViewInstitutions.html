{% extends "calisphere/institutionView.html"|pjax:request %}
{% load calisphere-extras %}
{% load staticfiles %}

{% block sidebar %}

  <div class="row">

    <div class="col-sm-6 col-md-12">

      <div class="button__institution-tabs">
        {% if repository_id %}
        <a class="btn btn-default button__institution-tab" href="{% url 'calisphere:repositoryView' repository_id 'collections' %}">
          Collections
        </a>
        {% elif campus_slug %}
        <a class="btn btn-default button__institution-tab" href="{% url 'calisphere:campusView' campus_slug 'collections' %}">
          Collections
        </a>
        {% endif %}
      </div>

      {% if campus_slug %}
      <div class="button__institution-tabs">
        <a class="btn btn-default button__institution-tab button__secondary" href="{% url 'calisphere:campusView' campus_slug 'institutions' %}">
          Institutions
        </a>
      </div>
      {% endif %}

    </div>

    <div class="col-sm-6 col-md-12">

      <!-- Begin Search Within Field -->
      <div class="search-collection">
        <form id="js-searchInstitution" action="{% url 'calisphere:campusView' campus_slug 'items' %}" method="get">
          <label for="search-collection__field" class="search-collection__label">Search {% if repository_id and uc_institution %}{{ uc_institution.0.name }}, {% endif %}{{ institution.name }}</label>
          <div class="input-group">
            <input id="search-collection__field" type="search" name="rq" class="form-control search-collection__field" form="js-facet">
            <span class="input-group-btn">
              <button class="btn btn-default search-collection__button" type="submit" form="js-facet">Search
              </button>
            </span>
          </div>
        </form>
      </div>      
      <!-- End Search Within Field -->
      
      {% include "calisphere/forms/faceting.html" %}

    </div>

  </div>
  
{% endblock %}

{% block filters %}{% endblock %}

{% block mainContent %}
  <h2 class="text__institution-heading2">Institutions</h2>
  

  <!-- Begin Institution List Component -->

  <div class="static">

    <h3>{{ institution.name }} Library Contributors</h3>

    <ul class="list-unstyled">
      {% for institution in institutions %}
          <li><a href="{% url 'calisphere:repositoryView' institution.id 'collections' %}">{{ institution.name }}</a></li>
      {% endfor %}
    </ul>

    <h3>Other Campus Institutions</h3>

    <ul class="list-unstyled">
      <li><a href="">Cheadle Center for Biological Research</a></li>
    </ul>

  </div>

  <!-- End Institution List Component -->
{% endblock %}
  
{% block footerScripts %}
  <script>
    $(document).ready(function() {
      $(document).on('focus', '.js-institutionSearch', function() {
        $('#js-searchInstitution').submit();
      });
    });
  </script>
{% endblock %}