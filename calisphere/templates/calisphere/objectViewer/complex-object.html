{% load staticfiles %}

{% if item.structMap.format|lower == 'image' %}
<div class="object__container-osd">
  
  <div id="obj__osd"></div>

  <div class="obj__osd-button-group">

    <a id="obj__osd-button-home" class="btn btn-default obj__osd-button" href="#">
      <span class="fa fa-refresh fa-fw"></span>
    </a>
    <a id="obj__osd-button-zoom-in" class="btn btn-default obj__osd-button" href="#">
      <span class="fa fa-plus fa-fw"></span>
    </a>
    <a id="obj__osd-button-zoom-out" class="btn btn-default obj__osd-button" href="#">
      <span class="fa fa-minus fa-fw"></span>
    </a>
    <a id="obj__osd-button-fullscreen" class="btn btn-default obj__osd-button" href="">
      <span class="fa fa-expand fa-fw"></span>
    </a>

  </div>

  <script src="{% static "bower_components/openseadragon/built-openseadragon/openseadragon/openseadragon.min.js" %}"></script>
  
  <script type="text/javascript">
      var viewer = OpenSeadragon({
          id: "obj__osd",
          tileSources: [{{ item.titleSources|safe }}],
          zoomInButton:   "obj__osd-button-zoom-in",
          zoomOutButton:  "obj__osd-button-zoom-out",
          homeButton:     "obj__osd-button-home",
          fullPageButton: "obj__osd-button-fullscreen"
      });
  </script>
      
</div>
{% else %}
<div class="object__container-type1">
  
  <div class="object__container-complex-non-image">

    <a class="obj-harvest__link" href="">
      <div class="icon__overlay-container">
        {% if item.structMap.format %}
        <span class="fa fa-file-text-o fa-fw obj-complex-non-image__file-icon-overlay"></span>
        {% else %}
        <span class="fa fa-cubes fa-fw obj-complex-non-image__file-icon-overlay"></span>
        {% endif %}
        <img class="obj-hosted__no-image" src="{% static 'images/transparent.png' %}" alt="{{ item.title.0|truncatewords:8 }}">
      </div>
      {% if item.structMap.format %}
      <div class="obj-hosted__caption">Read item on contributor's website
      </div>
      {% endif %}
    </a>

  </div>

</div>
{% endif %}

<div class="carousel-complex">
  <!--TODO: take care of parent object display in carousel -->
  <!-- {{ item.structMap.id }} -->
  <!-- {{ item.id }} -->
  <!-- carousel-complex__item--selected -->
  <div class="carousel-complex__item-fixed">
    <a href="" class="carousel-complex__link" class="carousel-complex__link">
      <span class="fa fa-cubes fa-fw carousel-complex__icon-overlay"></span>
      <!--carousel-complex__item-fixed-img--selected -->
      <img class="carousel-complex__img-fixed--no-image" src="{% static 'images/transparent.png' %}" alt="{{ item.title.0|truncatewords:8 }}">
    </a>
  </div>
  
  <div class="carousel-complex__item-container">
  {% for component in item.structMap %}
    <div class="{% if component.id == item.id %}carousel-complex__item--selected{% else %}carousel-complex__item{% endif %}">
      <a class="carousel-complex__link js-component-link" data-item_id="{{ forloop.counter0 }}" href="{% url 'calisphere:itemView' item.id %}">
        {% if component.format|lower != "image" %}
          {% if component.format|lower == "moving image" %}
          <span class="fa fa-play-circle-o fa-fw carousel-complex__icon-overlay"></span>
          {% elif component.format|lower == "sound"%}
          <span class="fa fa-volume-up fa-fw carousel-complex__icon-overlay"></span>
          {% elif component.format|lower == "text"%}
          <span class="fa fa-file-text-o fa-fw carousel-complex__icon-overlay"></span>
          {% elif component.format|lower == "complex object"%}
          <span class="fa fa-cubes fa-fw carousel-complex__icon-overlay"></span>
          {% endif %}
        {% endif %}
        {% if component.format|lower == "image" %}
          <img style="width: 100%; height: 100%"
          class="{% if component.id == item.id %}carousel-complex__item-img--selected{% else %}carousel-complex__item-img{% endif %}"
          data-lazy="http://ucldciiifwest-env.elasticbeanstalk.com/{{ component.id }}/full/,80/0/default.jpg"
          sizes="100%"
          alt="{{ component.label }}">
        {% else %}
          <img src="{% static 'images/transparent.png' %}" alt="{{ item.title.0|truncatewords:8 }}" class="carousel-complex__img--no-image">
        {% endif %}
      </a>
    </div>
  {% endfor %}
  </div>

</div>